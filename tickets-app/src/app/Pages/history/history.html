<app-header></app-header>

<div class="content">
  <app-menu></app-menu>

  <div class="principal">
    
    <div class="history-container">
      
      <h2 class="page-title">Historial de Tickets</h2>

      <div class="loading-state" *ngIf="isLoading">
        <div class="spinner"></div>
        <p>Cargando tu historial...</p>
      </div>

      <div class="empty-state" *ngIf="!isLoading && tickets.length === 0">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="empty-icon"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></svg>
        <p>No tienes tickets guardados aún.</p>
        <button class="btn-primary-small">Subir mi primer ticket</button>
      </div>

      <div class="cards-grid" *ngIf="!isLoading && tickets.length > 0">
        
        <div class="ticket-card" *ngFor="let ticket of tickets">
            
            <div class="card-image">
                <img [src]="ticket.image || 'assets/placeholder.png'" alt="Ticket">
                <span class="date-badge">{{ ticket.date }}</span>
            </div>

            <div class="card-content">
                <h3 class="company-name" title="{{ ticket.company_name }}">
                    {{ ticket.company_name || 'Sin Nombre' }}
                </h3>

                <div class="card-info">
                    <div class="info-item">
                        <span class="label">Total</span>
                        <span class="value price">{{ ticket.total }} €</span>
                    </div>
                    </div>

                <button class="btn-card-action" [routerLink]="['/ticket', ticket.id]">
                    Ver Detalles
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                </button>
            </div>
        </div>

      </div>

    </div>
  </div>
</div>