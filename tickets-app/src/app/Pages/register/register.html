<div class="auth-container">
  <div class="auth-card" [ngClass]="{'text-center': registroExitoso}">
    
    <ng-container *ngIf="!registroExitoso">
        <div class="auth-header">
          <h1 class="brand-title">DataTicket</h1>
          <p class="subtitle">Crea tu cuenta gratis</p>
        </div>

        <form (ngSubmit)="onRegister()">
          
          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            </span>
            <input type="text" placeholder="Usuario" [(ngModel)]="username" name="username" required>
          </div>

          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            </span>
            <input type="text" placeholder="Nombre" [(ngModel)]="firstName" name="name" required>
          </div>

          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
            </span>
            <input type="text" placeholder="Apellidos" [(ngModel)]="lastName" name="lastname" required>
          </div>

          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </span>
            <input type="email" placeholder="Email" [(ngModel)]="email" name="email" required>
          </div>

          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </span>
            <input type="password" placeholder="Contraseña" [(ngModel)]="password1" name="password1" required>
          </div>

          <div class="input-group">
            <span class="input-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
            </span>
            <input type="password" placeholder="Confirmar Contraseña" [(ngModel)]="password2" name="password2" required>
          </div>

          <button type="submit" class="btn-primary" [disabled]="isLoading">
            {{ isLoading ? 'Creando cuenta...' : 'Registrarse' }}
          </button>

        </form>

        <div class="auth-footer">
          <p>¿Ya tienes cuenta? <a routerLink="/">Inicia sesión</a></p>
        </div>
    </ng-container>


    <ng-container *ngIf="registroExitoso">
        
        <div class="status-section">
            <div class="icon-wrapper mail-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
            </div>
            
            <h3 class="status-title">¡Revisa tu bandeja de entrada!</h3>
            
            <p class="status-message">
                Hemos enviado un enlace de confirmación a <strong>{{ email }}</strong>.<br><br>
                Por favor, haz clic en el enlace para activar tu cuenta antes de iniciar sesión. No olvides revisar la carpeta de Spam.
            </p>
            
            <button class="btn-primary" routerLink="/">Ir a Iniciar Sesión</button>
        </div>

    </ng-container>

  </div>
</div>